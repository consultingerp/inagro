<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        
        <!-- corporate -->
        <record id="budget_ceo_budget" model="ir.rule">
            <field name="name">Budget Corporate</field>
            <field name="model_id" search="[('model','=','crossovered.budget')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_coporate'))]"/>
            <field name="domain_force">[('state','not in',['draft'])]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="perm_create" eval="True"/>
        </record>

        <!-- mgr finance -->
        <record id="budget_mgr_finance" model="ir.rule">
            <field name="name">Budget Manager Finance</field>
            <field name="model_id" search="[('model','=','crossovered.budget')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('account.group_account_manager'))]"/>
            <field name="domain_force"></field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="perm_create" eval="True"/>
        </record>

        <!-- mgr department -->
        <record id="budget_mgr_budget" model="ir.rule">
            <field name="name">Budget Manager Dept</field>
            <field name="model_id" search="[('model','=','crossovered.budget')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_mgr_dept'))]"/>
            <field name="domain_force">[('department_id','child_of',[user.employee_ids.department_id.id])]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="perm_create" eval="True"/>
        </record>

        <record id="budget_mgr_hr_dept" model="ir.rule">
            <field name="name">Master Dept Manager Dept</field>
            <field name="model_id" search="[('model','=','hr.department')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_mgr_dept'))]"/>
            <field name="domain_force">[('id','child_of',[user.employee_ids.department_id.id])]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="perm_create" eval="False"/>
        </record>

        <record id="budget_mgr_budgetary_position" model="ir.rule">
            <field name="name">Budgetary Manager Dept</field>
            <field name="model_id" search="[('model','=','account.budget.post')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_mgr_dept'))]"/>
            <field name="domain_force">[('department_id','child_of',[user.employee_ids.department_id.id])]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="perm_create" eval="False"/>
        </record>

        <record id="budget_mgr_analytic" model="ir.rule">
            <field name="name">Analytic Manager Dept</field>
            <field name="model_id" search="[('model','=','account.analytic.account')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_mgr_dept'))]"/>
            <field name="domain_force">[('department_id','child_of',[user.employee_ids.department_id.id])]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="perm_create" eval="False"/>
        </record>

        <!-- user -->
        <record id="filter_user_budget" model="ir.rule">
            <field name="name">Budget User Divisi</field>
            <field name="model_id" search="[('model','=','crossovered.budget')]" model="ir.model"/>
            <field name="groups" eval="[(4, ref('inagro_budget.budget_user_divisi'))]"/>
            <field name="domain_force">[('department_id','=', user.employee_ids.department_id.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="perm_create" eval="False"/>
        </record>

        <!-- hapus rule direktur PR -->
        <delete model="ir.rule" id="inagro_purchase.filter_pr_by_direktur"/>
        <delete model="ir.rule" id="inagro_purchase.filter_po_by_direktur"/>
        

    </data>
</odoo>
